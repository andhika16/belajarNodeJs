<%- include('../partials/header') %>
<div class="container blogs-details mt-4">
    <div class="details ">
        <h3 class="title"><%= blog.title %> </h3>
        <div class="content">
            <p class="snippet"><%= blog.snippet %> </p>
        </div>
        <a class="badge badge-danger" data-doc="<%= blog._id %> ">Delete</a>
    </div>
</div>
<script>
    const trashcan = document.querySelector('a.badge');
    trashcan.addEventListener('click', (e) => {
        const endpoint = `/blogs/${trashcan.dataset.doc}`;

        fetch(endpoint, { method: 'DELETE' })
            .then(response => response.json())
            .then(data => window.location.href = data.redirect)
            .catch(err => console.log(err))
    });
</script>
<%- include('../partials/footer') %>